(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{20:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var c,r=n(1),s=n.n(r),i=n(10),j=n.n(i),l=(n(20),n(11)),d=n(12),a=n(15),o=n(14),u=n(5),b=n(2),O=n(9),h=n(13),x=n(8),f=n.n(x),p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return console.log(e,c),(c=c||localStorage.getItem("csrf_token"))&&(t.headers=Object.assign(t.headers||{},{csrf_token:c})),fetch(e,t).then(function(){var e=Object(h.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=10;break}return(r=t.headers.get("csrf_token"))&&(c=r,localStorage.setItem("csrf_token",c)),console.log("csrf_token",c),e.next=6,t.json();case 6:return e.t0=e.sent,e.abrupt("return",{body:e.t0});case 10:if(401!=t.status){e.next=20;break}return e.t1=O.a,e.next=14,t.json();case 14:throw e.t2=e.sent,e.t3={body:e.t2},e.t4=n()||{},(0,e.t1)(e.t3,e.t4);case 20:return e.t5=O.a,e.t6=t.status,e.next=24,t.json();case 24:throw e.t7=e.sent,e.t8={err:e.t6,body:e.t7},e.t9=n()||{},(0,e.t5)(e.t8,e.t9);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},v=(n(22),n(0));function g(){var e=Object(b.f)(),t=Object(r.useRef)(null),n=Object(r.useRef)(null),c=Object(r.useRef)(null);return Object(r.useEffect)((function(){console.log("-----------sign up----------")}),[]),Object(v.jsxs)("div",{className:"sign_up",children:[Object(v.jsx)("center",{children:Object(v.jsx)("h1",{children:"Signup"})}),Object(v.jsx)("br",{}),Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"User detail"}),Object(v.jsx)("table",{children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"Username"}),Object(v.jsx)("td",{children:Object(v.jsx)("input",{type:"text",ref:n})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"Email"}),Object(v.jsx)("td",{children:Object(v.jsx)("input",{type:"text",ref:t})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"Detail"}),Object(v.jsx)("td",{children:Object(v.jsx)("textarea",{className:"ver_resizable",ref:c})})]}),Object(v.jsx)("tr",{children:Object(v.jsx)("td",{colSpan:2,children:Object(v.jsx)("input",{type:"button",value:"submit",onClick:function(){var r={email:t.current.value,name:n.current.value,description:c.current.value};p("/api/sign_up",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(t){var n=t.body;e("/user_profile",{state:n.data})})).catch((function(e){return alert("Error\n"+JSON.stringify(e))}))}})})})]})})]}),Object(v.jsxs)("label",{children:["Already have account? ",Object(v.jsx)(u.b,{to:"/",children:"Login"})]})]})}function m(){return Object(v.jsx)(g,{})}var y=n(4);n(24);function S(){var e=Object(b.f)(),t=Object(r.useState)(null),n=Object(y.a)(t,2),c=n[0],s=n[1];return Object(r.useEffect)((function(){console.log("-----------Login----------"),p("/api/login_status").then((function(t){var n=t.body;console.log("/user_profile"),e("/user_profile",{state:n.data})}))}),[]),Object(v.jsxs)("div",{className:"login",children:[Object(v.jsx)("center",{children:Object(v.jsx)("h1",{children:"Login"})}),Object(v.jsx)("br",{}),Object(v.jsx)("form",{children:Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"User detail"}),Object(v.jsx)("table",{children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"Email"}),Object(v.jsx)("td",{children:Object(v.jsx)("input",{type:"email",onChange:function(e){return s(e.target.value)}})})]}),Object(v.jsx)("tr",{children:Object(v.jsx)("td",{colSpan:2,children:Object(v.jsx)("input",{type:"button",value:"Login",onClick:function(){p("/api/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c})}).then((function(t){var n=t.body;e("/user_profile",{state:n.data})})).catch((function(e){return alert("Error\n"+JSON.stringify(e))}))}})})})]})})]})}),Object(v.jsxs)("label",{children:["New user? ",Object(v.jsx)(u.b,{to:"/signup",children:"Sign up"})]})]})}function N(){return Object(v.jsx)(S,{})}n(25);function _(){var e=Object(b.e)().state,t=Object(b.f)(),n=Object(r.useState)({uuid:null===e||void 0===e?void 0:e.uuid}),c=Object(y.a)(n,2),s=c[0],i=c[1],j=Object(r.useState)([]),l=Object(y.a)(j,2),d=l[0],a=l[1],o=Object(r.useRef)(null),u=Object(r.useRef)(null),O=Object(r.useRef)(null),h=function(){p("/api/user/active_sessions").then((function(e){var t=e.body;a(t.data)}),(function(){return t("/")})).catch((function(e){return alert("Error\n"+JSON.stringify(e))}))},x=null;return Object(r.useEffect)((function(){return console.log("-----------user profile----------"),p("/api/user").then((function(e){var t=e.body;i(t.data)}),(function(){return t("/")})).catch((function(e){return alert("Error\n"+JSON.stringify(e))})),h(),x||(x=setInterval((function(){p("/api/login_status",{},(function(){return t("/")}))}),2e3)),function(){clearInterval(x)}}),[]),Object(v.jsxs)("div",{className:"user_profile",children:[Object(v.jsx)("center",{children:Object(v.jsx)("h1",{children:"User profile"})}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{className:"form_container",children:[Object(v.jsx)("form",{className:"user_view",children:Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"User detail"}),Object(v.jsx)("table",{children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"UUID"}),Object(v.jsx)("td",{children:Object(v.jsx)("input",{type:"text",disabled:!0,value:(null===s||void 0===s?void 0:s.uuid)||""})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"Username"}),Object(v.jsx)("td",{children:Object(v.jsx)("input",{type:"text",disabled:!0,value:(null===s||void 0===s?void 0:s.name)||""})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"Email"}),Object(v.jsx)("td",{children:Object(v.jsx)("input",{type:"text",disabled:!0,value:(null===s||void 0===s?void 0:s.email)||""})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"Detail"}),Object(v.jsx)("td",{children:Object(v.jsx)("pre",{className:"ver_resizable",children:(null===s||void 0===s?void 0:s.description)||""})})]})]})})]})}),Object(v.jsx)("form",{className:"user_update",children:Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"Update User detail"}),Object(v.jsx)("table",{children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"UUID"}),Object(v.jsx)("td",{children:Object(v.jsx)("input",{type:"text",disabled:!0,value:(null===s||void 0===s?void 0:s.uuid)||""})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"Username"}),Object(v.jsx)("td",{children:Object(v.jsx)("input",{type:"text",defaultValue:(null===s||void 0===s?void 0:s.name)||"",ref:u})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"Email"}),Object(v.jsx)("td",{children:Object(v.jsx)("input",{type:"text",defaultValue:(null===s||void 0===s?void 0:s.email)||"",ref:o})})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"Detail"}),Object(v.jsx)("td",{children:Object(v.jsx)("textarea",{className:"ver_resizable",ref:O,defaultValue:(null===s||void 0===s?void 0:s.description)||""})})]}),Object(v.jsx)("tr",{children:Object(v.jsx)("td",{colSpan:2,children:Object(v.jsx)("input",{type:"button",value:"submit",onClick:function(){var e={email:o.current.value,name:u.current.value,description:O.current.value};p("/api/user",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({newUserData:e})},(function(){return t("/")})).then((function(){e.uuid=s.uuid,i(e)})).catch((function(e){return alert("Error\n"+JSON.stringify(e))}))}})})})]})})]})}),Object(v.jsx)("form",{className:"user_logout",children:Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"Delete User detail"}),Object(v.jsx)("table",{children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"UUID"}),Object(v.jsx)("td",{children:Object(v.jsx)("input",{type:"text",disabled:!0,value:(null===s||void 0===s?void 0:s.uuid)||""})})]}),Object(v.jsx)("tr",{children:Object(v.jsx)("td",{colSpan:2,children:"\xa0"})}),Object(v.jsx)("tr",{children:Object(v.jsx)("td",{colSpan:2,children:Object(v.jsx)("input",{type:"button",value:"Logout",onClick:function(){p("/api/user/logout",{},(function(){return t("/")})).then((function(){t("/")})).catch((function(e){return alert("Error\n"+JSON.stringify(e))}))}})})}),Object(v.jsx)("tr",{children:Object(v.jsx)("td",{colSpan:2,children:Object(v.jsx)("input",{type:"button",value:"Delete my account",onClick:function(){p("/api/user",{method:"delete"}).then((function(e){var n=e.body;alert(JSON.stringify(n)),t("/signup")})).catch((function(e){return alert("Error\n"+JSON.stringify(e))}))}})})}),Object(v.jsx)("tr",{children:Object(v.jsx)("td",{children:Object(v.jsx)("input",{})})}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Cookie:"}),Object(v.jsx)("td",{children:decodeURIComponent(document.cookie)})]})]})})]})}),Object(v.jsx)("form",{className:"active_sessions",children:Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"Active Sessions"}),Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Remove"}),Object(v.jsx)("th",{children:"IP"}),Object(v.jsx)("th",{children:"Token"}),Object(v.jsx)("th",{children:"Status"}),Object(v.jsx)("th",{children:"Expire"}),Object(v.jsx)("th",{children:"Use rAgent"})]})}),Object(v.jsx)("tbody",{children:d.map((function(e){var n=e.ip,c=e.ua,r=e.token_id,s=e.exp,i=e.status;return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"active"==i&&Object(v.jsx)("input",{type:"button",value:"delete",onClick:function(){return function(e,n){p("/api/user/block_token",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({token_id:e,exp:n})},(function(){return t("/")})).then((function(){h()})).catch((function(e){return alert("Error\n"+JSON.stringify(e))}))}(r,s)}})}),Object(v.jsx)("td",{className:"ip",children:n}),Object(v.jsx)("td",{children:r}),Object(v.jsx)("td",{className:"ip",children:i}),Object(v.jsx)("td",{children:new Date(s).toLocaleString()}),Object(v.jsx)("td",{children:Object(v.jsx)("div",{className:"sub_tbl_sect",children:Object.entries(JSON.parse(c)).map((function(e){var t=Object(y.a)(e,2),n=t[0],c=t[1];return Object(v.jsxs)("div",{children:[Object(v.jsx)("b",{children:n}),": ",Object(v.jsx)("span",{children:JSON.stringify(c)})]},r+"_"+n)}))})})]},r)}))})]})]})})]})]})}function k(){return Object(v.jsx)(_,{})}var U=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(v.jsx)(u.a,{children:Object(v.jsxs)(b.c,{children:[Object(v.jsx)(b.a,{path:"/",exact:!0,element:Object(v.jsx)(N,{})}),Object(v.jsx)(b.a,{path:"signup",exact:!0,element:Object(v.jsx)(m,{})}),Object(v.jsx)(b.a,{path:"user_profile",exact:!0,element:Object(v.jsx)(k,{})})]})})}}]),n}(r.Component),C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),s(e),i(e)}))};j.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(U,{})}),document.getElementById("root")),C()}},[[26,1,2]]]);
//# sourceMappingURL=main.0ab0479f.chunk.js.map